{# default/scheduler.html.twig #}
{% extends "base.html.twig" %}

{% block stylesheets %}
    <!-- Include the flat style of the scheduler -->
    <link rel='stylesheet' type='text/css' href='{{ asset("libraries/dhtmlxScheduler/codebase/dhtmlxscheduler_flat.css") }}' charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('libraries/dhtmlxScheduler/codebase/dhtmlxscheduler_material.css') }}" charset="utf-8"/>
    <!-- If you won't use full screen mode, ignore the following style -->
    <style type="text/css" media="screen">
        html, body{
            margin:0px;
            padding:0px;
            height:100%;
            overflow:hidden;
        }
    </style>
{% endblock %}

{% block body -%}

    <div id="scheduler_element" class="dhx_cal_container" style='width:80%; height:80%; margin:0 auto;'>
        <div class="dhx_cal_navline">
            <div class="dhx_cal_prev_button">&nbsp;</div>
            <div class="dhx_cal_next_button">&nbsp;</div>
            <div class="dhx_cal_today_button"></div>
            <div class="dhx_cal_date"></div>
            <div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
            <div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
            <div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>
        </div>
        <div class="dhx_cal_header"></div>
        <div class="dhx_cal_data"></div>
    </div>

{% endblock %}

{% block javascripts %}
    <!-- Include the scheduler library -->
    <script src='{{ asset("libraries/dhtmlxScheduler/codebase/dhtmlxscheduler.js") }}' type='text/javascript' charset="utf-8"></script>
    <script src='{{ asset("libraries/dhtmlxScheduler/codebase/dhtmlxscheduler.js") }}' type='text/javascript' charset="utf-8"></script>

    <script src="{{ asset('libraries/dhtmlxScheduler/codebase/ext/dhtmlxscheduler_limit.js') }}" type="text/javascript"></script>
    <script src="{{ asset('libraries/dhtmlxScheduler/codebase/sources/locale/locale_fr.js') }}"></script>

    <!-- Include jQuery to handle AJAX Requests -->
    <script src="{{ 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js' }}"></script>

    <!-- Include Momentjs to play with the dates -->
    <script src="{{ asset("libraries/momentjs/moment.js") }}"></script>

    <script>
        // Expose the appointments globally by printing the JSON string with twig and the raw filter
        // so they can be accesible by the schedulerScripts.js the controller
        window.GLOBAL_APPOINTMENTS = {{ calendrier|raw }};

        // As the scheduler scripts will be in other files, the routes generated by twig
        // should be exposed in the window too
        window.GLOBAL_SCHEDULER_ROUTES = {
            create: '{{ path("scheduler_create") }}',
            update: '{{ path("scheduler_update") }}',
            delete: '{{ path("scheduler_delete") }}'
        };

    </script>

    <!-- Include the schedulerScripts that you will need to write in the next step -->
    <script src='{{ asset("libraries/schedulerScripts.js") }}' type='text/javascript' charset="utf-8"></script>

{% endblock %}